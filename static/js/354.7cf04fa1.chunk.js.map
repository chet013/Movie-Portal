{"version":3,"file":"static/js/354.7cf04fa1.chunk.js","mappings":"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","sources":["webpack://portfolio/./src/Pages/movie/index.module.css?e9bf","Pages/movie/Movie.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"movie\":\"movie_movie__bIsDA\",\"error\":\"movie_error__oZjra\",\"movieDark\":\"movie_movieDark__6as3w\",\"movieDetails\":\"movie_movieDetails__BcGRR\",\"movieDetailsDark\":\"movie_movieDetailsDark__hbleL\",\"titleWrapper\":\"movie_titleWrapper__RcwV3\",\"descriptionWrapper\":\"movie_descriptionWrapper__UzXyz\",\"descriptionWrapperDark\":\"movie_descriptionWrapperDark__3oHmm\",\"managWrapper\":\"movie_managWrapper__Joyvm\"};","import { useParams } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport { Loader } from '../../Components/loader/Loader';\nimport { useGetFilmQuery } from '../../api/movieApiSlice';\nimport styles from './index.module.css';\nimport { useState, useEffect } from 'react';\nimport { useUser } from '../../app/context';\n\nexport default function Movie() {\n    const navigate = useNavigate();\n    const { id } = useParams();\n    const { data, error, isLoading } = useGetFilmQuery(id);\n    const { authorized, toggleFavorite, isDarkTheme } = useUser();\n    const movie = data;\n\n    const [isFavorite, setIsFavorite] = useState(false);\n\n    useEffect(() => {\n        const currentUser = JSON.parse(localStorage.getItem('current-user'));\n        if (currentUser?.favoritesMoviesIds?.includes(id)) {\n            setIsFavorite(true);\n        } else {\n            setIsFavorite(false);\n        }\n    }, [id, authorized]);\n\n    const handleClickLike = () => {\n        if (!authorized) {\n            navigate('/login', { replace: true });\n            return;\n        }\n\n        const storedData = JSON.parse(localStorage.getItem('moviPortal')) || { users: [] };\n        const currentUser = JSON.parse(localStorage.getItem('current-user'));\n\n        const users = storedData.users.map((user) => {\n            if (user.login === currentUser.login) {\n                const updatedFavorites = isFavorite\n                    ? user.favoritesMoviesIds.filter((movieId) => movieId !== id)\n                    : [...new Set([...user.favoritesMoviesIds, id])];\n\n                return { ...user, favoritesMoviesIds: updatedFavorites };\n            }\n            return user;\n        });\n\n        localStorage.setItem('moviPortal', JSON.stringify({ users }));\n\n        const updatedUser = users.find((user) => user.login === currentUser.login);\n        localStorage.setItem('current-user', JSON.stringify(updatedUser));\n\n        setIsFavorite(!isFavorite);\n        toggleFavorite(id);\n    };\n\n    if (error) {\n        return <p className={styles.error}>{error}</p>;\n    }\n\n    return (\n        <div className={!isDarkTheme ? styles.movie : styles.movieDark}>\n            {isLoading ? (\n                <Loader className={styles.loader} />\n            ) : (\n                <>\n                    <div className={!isDarkTheme ? styles.movieDetails : styles.movieDetailsDark}>\n                        <div className={styles.titleWrapper}>\n                            <h1>{movie.Title}</h1>\n                            <img src={movie.Poster} alt={movie.Title} className={styles.poster} />\n                        </div>\n                        <div className={!isDarkTheme ? styles.descriptionWrapper : styles.descriptionWrapperDark}>\n                            <p>Year: {movie.Year}</p>\n                            <p>Genre: {movie.Genre}</p>\n                            <p>Plot: {movie.Plot}</p>\n                            <p>Director: {movie.Director}</p>\n                            <p>Actors: {movie.Actors}</p>\n                            <div className={styles.managWrapper}>\n                                <p>{isFavorite ? 'Remove from favorites' : 'Add to favorites'}</p>\n                                <button\n                                    onClick={handleClickLike}\n                                    style={{ color: isFavorite ? 'red' : 'black' }}\n                                >\n                                    {isFavorite ? 'üñ§' : '‚ù§Ô∏è'}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </>\n            )}\n        </div>\n    );\n};"],"names":["Movie","navigate","useNavigate","id","useParams","data","error","isLoading","useGetFilmQuery","authorized","toggleFavorite","isDarkTheme","useUser","movie","isFavorite","setIsFavorite","useState","useEffect","_currentUser$favorite","currentUser","JSON","parse","localStorage","getItem","favoritesMoviesIds","includes","_jsx","className","styles","children","movieDark","Loader","loader","_Fragment","_jsxs","movieDetailsDark","movieDetails","titleWrapper","Title","src","Poster","alt","poster","descriptionWrapperDark","descriptionWrapper","Year","Genre","Plot","Director","Actors","managWrapper","onClick","handleClickLike","replace","storedData","users","map","user","login","updatedFavorites","filter","movieId","Set","setItem","stringify","updatedUser","find","style","color"],"sourceRoot":""}