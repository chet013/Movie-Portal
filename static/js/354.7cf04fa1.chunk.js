"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[354],{354:(e,r,s)=>{s.r(r),s.d(r,{default:()=>p});var i=s(216),o=s(943),a=s(244);const t={movie:"movie_movie__bIsDA",error:"movie_error__oZjra",movieDark:"movie_movieDark__6as3w",movieDetails:"movie_movieDetails__BcGRR",movieDetailsDark:"movie_movieDetailsDark__hbleL",titleWrapper:"movie_titleWrapper__RcwV3",descriptionWrapper:"movie_descriptionWrapper__UzXyz",descriptionWrapperDark:"movie_descriptionWrapperDark__3oHmm",managWrapper:"movie_managWrapper__Joyvm"};var l=s(43),c=s(532),n=s(579);function p(){const e=(0,i.Zp)(),{id:r}=(0,i.g)(),{data:s,error:p,isLoading:m}=(0,a.GX)(r),{authorized:v,toggleFavorite:d,isDarkTheme:_}=(0,c.J)(),u=s,[g,h]=(0,l.useState)(!1);(0,l.useEffect)((()=>{var e;const s=JSON.parse(localStorage.getItem("current-user"));null!==s&&void 0!==s&&null!==(e=s.favoritesMoviesIds)&&void 0!==e&&e.includes(r)?h(!0):h(!1)}),[r,v]);return p?(0,n.jsx)("p",{className:t.error,children:p}):(0,n.jsx)("div",{className:_?t.movieDark:t.movie,children:m?(0,n.jsx)(o.a,{className:t.loader}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:_?t.movieDetailsDark:t.movieDetails,children:[(0,n.jsxs)("div",{className:t.titleWrapper,children:[(0,n.jsx)("h1",{children:u.Title}),(0,n.jsx)("img",{src:u.Poster,alt:u.Title,className:t.poster})]}),(0,n.jsxs)("div",{className:_?t.descriptionWrapperDark:t.descriptionWrapper,children:[(0,n.jsxs)("p",{children:["Year: ",u.Year]}),(0,n.jsxs)("p",{children:["Genre: ",u.Genre]}),(0,n.jsxs)("p",{children:["Plot: ",u.Plot]}),(0,n.jsxs)("p",{children:["Director: ",u.Director]}),(0,n.jsxs)("p",{children:["Actors: ",u.Actors]}),(0,n.jsxs)("div",{className:t.managWrapper,children:[(0,n.jsx)("p",{children:g?"Remove from favorites":"Add to favorites"}),(0,n.jsx)("button",{onClick:()=>{if(!v)return void e("/login",{replace:!0});const s=JSON.parse(localStorage.getItem("moviPortal"))||{users:[]},i=JSON.parse(localStorage.getItem("current-user")),o=s.users.map((e=>{if(e.login===i.login){const s=g?e.favoritesMoviesIds.filter((e=>e!==r)):[...new Set([...e.favoritesMoviesIds,r])];return{...e,favoritesMoviesIds:s}}return e}));localStorage.setItem("moviPortal",JSON.stringify({users:o}));const a=o.find((e=>e.login===i.login));localStorage.setItem("current-user",JSON.stringify(a)),h(!g),d(r)},style:{color:g?"red":"black"},children:g?"\ud83d\udda4":"\u2764\ufe0f"})]})]})]})})})}}}]);
//# sourceMappingURL=354.7cf04fa1.chunk.js.map